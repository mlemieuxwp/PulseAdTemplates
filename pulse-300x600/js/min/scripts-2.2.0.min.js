var PulseArticles=function(){function e(e,t){for(var r,i=/<%([^%>]+)?%>/g,l=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,s="var r=[];\n",a=0,n=function(e,t){return s+=t?e.match(l)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",n};r=i.exec(e);)n(e.slice(a,r.index))(r[1],!0),a=r.index+r[0].length;return n(e.substr(a,e.length-a)),s+='return r.join("");',new Function(s.replace(/[\r\t\n]/g,"")).apply(t)}function t(e){if(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}}function r(r){function l(e){e.onclick=function(e){if(o){var t=document.createElement("img");t.alt="",t.border=0,t.src=o,t.style.width="1px",t.style.height="1px",t.style.display="none",f.appendChild(t)}}}if(r){var s,n=r,c=n.getAttribute("data-articles"),u=n.getAttribute("data-shuffle"),p=n.getAttribute("data-urlparam"),o=n.getAttribute("data-clicktrack"),d=n.getAttribute("data-maxlength")||3,h=n.getAttribute("data-sponsorall")||!1,f=document.getElementsByClassName("pulse-tracking-wrapper")[0];if(c){c=JSON.parse(c),s=u?t(c).slice(0,d):c.slice(0,d);var g=e(a,{articles:s,showArticles:!0,sponsorAll:h,linkTarget:function(e){return this.articles[e].sponsor?"_blank":"_top"},url_param:p?"?spon_con="+p:""});if(n.innerHTML=g,n.querySelectorAll){var m=n.querySelectorAll("a");for(i=0;i<m.length;i++)l(m[i])}}}}function l(){if(n.querySelectorAll){var e=n.querySelectorAll(".pulse-article-number");for(i=0;i<e.length;i++)e[i].innerText=i+1}}function s(){for(var e=document.getElementsByClassName("pulse-article-list"),t=e.length;t--;)r(e[t]);l(),n.style.display="block"}var a='<%if(this.showArticles) {%><%for(var index in this.articles) {%><li class="pulse-article-list-item"><div class="pulse-article-wrapper cf"><div class="pulse-article-thumb-wrapper"><a href="<%this.articles[index].url%><%this.url_param%>" target="<% this.linkTarget(index) %>"><%if(this.articles[index].src) {%><img src="https://img.washingtonpost.com/wp-apps/imrs.php?src=<%this.articles[index].src%>&h=61&w=61" border="0" class="pulse-article-thumbnail" /><%}%></a></div><div class="pulse-article-number"></div><div class="pulse-article-desc-wrapper"><p class="pulse-article-desc"><a href="<%this.articles[index].url%><%this.url_param%>" class="pulse-article-desc-link" target="<% this.linkTarget(index) %>"><%this.articles[index].title%></a></p></div></div></li><%}%><%} else {%><p>none</p><%}%>',n=document.getElementById("articles");return{init:s}}();PulseArticles.init();
!function(t){"use strict";function n(t,n){var e;for(e in t)r(t[e],n,e==t.length-1)}function e(t,n,e){var o=t.onload;t.onload=function(){o(),n&&e&&n()}}function o(t,n,o){var r=d[t];r?e(r,n,o):a(t,n,o)}function r(t,e,r){var s=i.shim[t];s&&s.deps.length?n(s.deps,function(){a(t,e,r)}):o(t,e,r)}function a(t,n,e){function o(o){delete d[t],a.onload=a.onreadystatechange=a.onerror="",n&&e&&n()}function r(n){throw new Error("Syntax or http error: "+t)}var a=document.createElement("script");return a.type="text/javascript",a.onload=a.onreadystatechange=o,a.onerror=r,a.charset="utf-8",d[t]=a,a.src=i.path[t]?i.path[t]:t,c.appendChild(a),a}var i={path:{jquery:"https://www.washingtonpost.com/wp-stat/advertising/PostPulse/js/jquery-1.11.0.min.js"},shim:{}},s=t.document,c=s&&(s.head||s.getElementsByTagName("head")[0]),d={};t.getScript=n}(this.window||"undefined"!=typeof global&&global||this);

getScript(["jquery"],function(){$="undefined"!=typeof $?$:top.jQuery;var e=$.proxy($.fn.find,$(document)),a=function(){function a(){$(o).data("current-time")&&(o.currentTime=$(o).data("current-time"))}function l(e){e.preventDefault(),window.open(d)}function p(a){a.preventDefault(),o.muted?(o.muted=!1,e(this).removeClass("fa-volume-off")):(o.muted=!0,e(this).addClass("fa-volume-off"))}function t(a){a.preventDefault(),v.length&&k&&(v.off("click"),k=!1,e(o).on("click",l)),o.paused||o.ended?(o.play(),e(o).parent().addClass("pulse-player-active"),e(o).css("visibility","visible"),e(this).addClass("fa-pause-circle-o pulse-player-pause")):(o.pause(),e(this).removeClass("fa-pause-circle-o pulse-player-pause"))}function u(){o.load(),m&&f.removeClass("fa-pause-circle-o pulse-player-pause").show()}function n(){e(".pulse-wrapper").on("mouseenter",".pulse-player-active",function(){f.fadeIn()}),e(".pulse-wrapper").on("mouseleave",".pulse-player-active",function(){f.fadeOut()})}function r(){v.length&&!o.hasAttribute("autoplay")?v.on("click",function(e){f.click()}):e(o).on("click",l)}function s(){o&&o.autoplay&&(o.muted=!0,v.addClass("pulse-player-active"),f.hide().addClass("fa-pause-circle-o pulse-player-pause"),y.addClass("fa-volume-off"))}function i(){e(".pulse-player-poster").on("click",l),y.on("click",p),f.on("click",t),a(),r(),s(),e(o).on("ended",u)}function c(){i(),n()}var o=document.getElementById("pulse-player"),d=e(".pulse-wrapper").data("click"),f=(e(".pulse-player-wrapper").data("video-track-play")||e(".pulse-wrapper").data("track")||!1,e(".pulse-player-wrapper").data("video-track-end")||!1,e(".pulse-player-play")),y=e(".pulse-player-volume"),v=e(".pulse-player-wrapper"),m=e(".pulse-player-no-ctrls").length>0?!1:!0,k=!0;return{init:c}}();a.init()});
var PulseTracking=function(){function e(e){var t=new Image;t.alt="",t.border=0,t.height=1,t.width=1,t.style.display="none",e&&(e=e.replace(/%%CACHEBUSTER%%/gi,""),e+=Math.floor(1e12*Math.random())+"?",t.src=e,d.appendChild(t))}function t(e){var t=(e/4).toFixed(1);sessionStorage.setItem("one",t),sessionStorage.setItem("two",(2*t).toFixed(1)),sessionStorage.setItem("three",(3*t).toFixed(1))}function n(){var t=i.currentTime.toFixed(1);m&&t>=parseInt(sessionStorage.getItem("one"))?(e(m),sessionStorage.setItem("one",null)):p&&t>=parseInt(sessionStorage.getItem("two"))?(e(p),sessionStorage.setItem("two",null)):I&&t>=parseInt(sessionStorage.getItem("three"))&&(e(I),sessionStorage.setItem("three",null))}function s(){e(g)}function a(){e(c),t(this.duration)}function r(){i&&(i.addEventListener("ended",s,!1),i.addEventListener("timeupdate",n,!1),i.addEventListener("play",a,!1))}function o(){r()}var i=document.getElementById("pulse-player"),l=document.getElementsByClassName("pulse-player-wrapper")[0],d=document.getElementsByClassName("pulse-tracking-wrapper")[0],u=l&&l.getAttribute("data-videotracking");if(u=u&&JSON.parse(u),"undefined"!=typeof u&&u)var c=u.trackstart||null,g=u.track100||null,m=u.track25||null,p=u.track50||null,I=u.track75||null;return{init:o}}();document.addEventListener("DOMContentLoaded",PulseTracking.init(),!1);