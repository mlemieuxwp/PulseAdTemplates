var PulseArticles=function(){function e(e,t){for(var r,i=/<%([^%>]+)?%>/g,s=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,a="var r=[];\n",l=0,n=function(e,t){return a+=t?e.match(s)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",n};r=i.exec(e);)n(e.slice(l,r.index))(r[1],!0),l=r.index+r[0].length;return n(e.substr(l,e.length-l)),a+='return r.join("");',new Function(a.replace(/[\r\t\n]/g,"")).apply(t)}function t(e){if(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}}function r(){if(document.getElementById("articles")){var r,s,a=document.getElementById("articles"),l=a.getAttribute("data-articles");a.getAttribute("data-shuffle");l=JSON.parse(l),s=t(l),r=s.slice(0,3);var n=e(i,{articles:r,showArticles:!0,addOne:function(e){return parseInt(e,10)+1}});a.innerHTML=n}}var i='<%if(this.showArticles) {%><%for(var index in this.articles) {%><li class="pulse-article-list-item"><div class="pulse-article-thumb-wrapper"><a href="<%this.articles[index].url%>" target="_top"><%if(this.articles[index].src) {%><img src="https://img.washingtonpost.com/wp-apps/imrs.php?src=<%this.articles[index].src%>&h=60&w=60" border="0" class="pulse-article-thumbnail" /><%}%></a></div><div class="pulse-article-number"><% this.addOne(index) %></div><div class="pulse-article-desc-wrapper"><p class="pulse-article-desc"><a href="<%this.articles[index].url%>" class="pulse-article-desc-link" target="_top"><%this.articles[index].title%></a></p></div></li><%}%><%} else {%><p>none</p><%}%>';return{loadArticles:r}}();PulseArticles.loadArticles();
!function(t){"use strict";function n(t,n){var e;for(e in t)r(t[e],n,e==t.length-1)}function e(t,n,e){var o=t.onload;t.onload=function(){o(),n&&e&&n()}}function o(t,n,o){var r=d[t];r?e(r,n,o):a(t,n,o)}function r(t,e,r){var s=i.shim[t];s&&s.deps.length?n(s.deps,function(){a(t,e,r)}):o(t,e,r)}function a(t,n,e){function o(o){delete d[t],a.onload=a.onreadystatechange=a.onerror="",n&&e&&n()}function r(n){throw new Error("Syntax or http error: "+t)}var a=document.createElement("script");return a.type="text/javascript",a.onload=a.onreadystatechange=o,a.onerror=r,a.charset="utf-8",d[t]=a,a.src=i.path[t]?i.path[t]:t,c.appendChild(a),a}var i={path:{jquery:"https://www.washingtonpost.com/wp-stat/advertising/PostPulse/js/jquery-1.11.0.min.js"},shim:{}},s=t.document,c=s&&(s.head||s.getElementsByTagName("head")[0]),d={};t.getScript=n}(this.window||"undefined"!=typeof global&&global||this);
getScript(["jquery"],function(){$="undefined"!=typeof $?$:top.jQuery;var e=$.proxy($.fn.find,$(document)),t=function(){function t(t){if(t){var a=Math.floor(1e7*Math.random())+"?";t+=a,e(".pulse-tracking-wrapper").append('<img src="'+t+'" alt="" border="0" height="1" width="1" style="display:none;" />')}}function a(){$(c).data("current-time")&&(c.play(),c.pause(),c.currentTime=$(c).data("current-time"))}function p(e){e.preventDefault(),window.open(d)}function i(t){t.preventDefault(),c.muted?(c.muted=!1,e(this).removeClass("fa-volume-off")):(c.muted=!0,e(this).addClass("fa-volume-off"))}function l(a){a.preventDefault(),$video_wrapper.length&&isFirstClick&&($video_wrapper.off("click"),isFirstClick=!1,e(c).on("click",p)),c.paused||c.ended?(t(f),c.play(),e(c).parent().addClass("pulse-player-active"),e(c).css("visibility","visible"),e(this).addClass("fa-pause-circle-o pulse-player-pause")):(c.pause(),e(this).removeClass("fa-pause-circle-o pulse-player-pause"))}function n(){c.load(),$has_video_ctrls&&$video_play_button.removeClass("fa-pause-circle-o pulse-player-pause").show()}function o(){e(".pulse-wrapper").on("mouseenter",".pulse-player-active",function(){$video_play_button.fadeIn()}),e(".pulse-wrapper").on("mouseleave",".pulse-player-active",function(){$video_play_button.fadeOut()})}function r(){$video_wrapper.length&&!c.hasAttribute("autoplay")?$video_wrapper.on("click",function(e){$video_play_button.click()}):e(c).on("click",p)}function u(){e(".pulse-player-poster").on("click",p),$video_mute_button.on("click",i),$video_play_button.on("click",l),a(),r(),e(c).on("ended",n)}function s(){u(),o()}var c=document.getElementById("pulse-player"),d=e(".pulse-wrapper").data("click"),f=e(".pulse-wrapper").data("track")?e(".pulse-wrapper").data("track"):!1;return $video_play_button=e(".pulse-player-play"),$video_mute_button=e(".pulse-player-volume"),$video_wrapper=e(".pulse-player-wrapper"),$has_video_ctrls=e(".pulse-player-no-ctrls").length>0?!1:!0,isFirstClick=!0,{init:s}}();t.init()});
